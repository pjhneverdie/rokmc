# 초기 서블릿 방식
1. 클라이언트가 HTTP/HTTPS 요청 전송
2. DNS를 통해 IP + 포트로 서버에 도착
3. 서블릿 컨테이너(Tomcat)가 요청 수신
4. URL 매핑에 맞는 서블릿 확인
5. 서블릿이 없으면 1회 생성(싱글톤)
6. 요청마다 새로운 스레드에서 서블릿 돌림
7. 개발자는 WAS(톰켓)가 HTTP 요청 자바 객체로 만들어서 서블릿에 넘기면 고걸로 편하게 비즈니스 로직 개발(개발자는 여기에만 집중하는 구조. 서블릿 구현해서)

# 역할 분담을 딱 나누면
## WAS (Tomcat)

* 포트 listen

* HTTP 파싱

* 멀티스레드 관리

* Request / Response 객체 생성

* 서블릿 호출

## 개발자
* 서블릿 구현

# 왜 지금은 안 쓰냐면
일단 서블릿에서 이때는 html도 다 작성해서 보냈음. 비즈니스 로직이랑 프론트 코드 짬뽕 식.

그리고 이때는 스프링이 아니니까 클래스 인스턴스를 자기가 직접 생성했어야 함. 의존성 관리가 ㄷㄷㄷ. 프로젝트가 크면 ㅠㅠ.

글고 스프링이 아니니까 web.xml에 알알이 다 서블릿을 맵핑해놔야 했쓰. 아래 스타일.

```java
// 비즈니스 로직 클래스
class UserService {
    public String getUserGreeting(String name) {
        return "Hello, " + name + "!";
    }
}

public class HelloServlet extends HttpServlet {
    private UserService userService;

    @Override
    public void init() throws ServletException {
        // Spring이 없으므로 직접 인스턴스 생성
        userService = new UserService();
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        String name = request.getParameter("name");
        if (name == null) name = "Guest";

        String greeting = userService.getUserGreeting(name);

        // HTML 직접 작성
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        out.println("<html>");
        out.println("<head><title>Hello Servlet</title></head>");
        out.println("<body>");
        out.println("<h1>" + greeting + "</h1>");
        out.println("</body>");
        out.println("</html>");
    }
}

```
```xml
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
                             http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
         version="3.1">

    <!-- 서블릿 정의 -->
    <servlet>
        <servlet-name>HelloServlet</servlet-name>
        <servlet-class>HelloServlet</servlet-class>
    </servlet>

    <!-- 서블릿 매핑 -->
    <servlet-mapping>
        <servlet-name>HelloServlet</servlet-name>
        <url-pattern>/hello</url-pattern>
    </servlet-mapping>

</web-app>

```
# 그럼 머 쓰냐
스프링에서도 내가 서블릿 만들어서 등록 가능함.
근데 굳이 할 필요가 없음. 디스패처 서블릿 + 컨트롤러 조합이 있자나.